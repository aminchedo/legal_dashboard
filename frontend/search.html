<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¬Ø³ØªØ¬Ùˆ | Ø³Ø§Ù…Ø§Ù†Ù‡ Ø­Ù‚ÙˆÙ‚ÛŒ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Load API Client -->
    <script src="/static/js/api-client.js"></script>
    <script src="/static/js/core.js"></script>
    
    <style>
        :root {
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --text-light: #ffffff;
            --body-bg: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 50%, #cbd5e1 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --glass-bg: rgba(255, 255, 255, 0.9);
            --glass-border: rgba(148, 163, 184, 0.2);
            --primary-gradient: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            --secondary-gradient: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            --success-gradient: linear-gradient(135deg, #10b981 0%, #047857 100%);
            --warning-gradient: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            --danger-gradient: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            --shadow-xs: 0 1px 3px rgba(0, 0, 0, 0.05);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 15px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 8px 25px rgba(0, 0, 0, 0.12);
            --sidebar-width: 260px;
            --border-radius: 12px;
            --border-radius-sm: 8px;
            --transition-smooth: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-fast: all 0.15s ease-in-out;
            --font-size-xs: 0.7rem;
            --font-size-sm: 0.8rem;
            --font-size-base: 0.9rem;
            --font-size-lg: 1.1rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Vazirmatn', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--body-bg);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            font-size: var(--font-size-base);
        }

        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.02);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-gradient);
            border-radius: 10px;
        }

        .dashboard-container {
            display: flex;
            min-height: 100vh;
            width: 100%;
        }

        /* Ø³Ø§ÛŒØ¯Ø¨Ø§Ø± Ù…Ø´Ø§Ø¨Ù‡ ØµÙØ­Ø§Øª Ù‚Ø¨Ù„ÛŒ */
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(135deg,
                rgba(248, 250, 252, 0.98) 0%,
                rgba(241, 245, 249, 0.95) 25%,
                rgba(226, 232, 240, 0.98) 50%,
                rgba(203, 213, 225, 0.95) 75%,
                rgba(148, 163, 184, 0.1) 100%);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            padding: 1rem 0;
            position: fixed;
            height: 100vh;
            right: 0;
            top: 0;
            z-index: 1000;
            overflow-y: auto;
            box-shadow:
                0 0 0 1px rgba(59, 130, 246, 0.08),
                -8px 0 32px rgba(59, 130, 246, 0.12),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            border-left: 1px solid rgba(59, 130, 246, 0.15);
        }

        .sidebar-header {
            padding: 0 1rem 1rem;
            border-bottom: 1px solid rgba(59, 130, 246, 0.12);
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg,
                rgba(255, 255, 255, 0.4) 0%,
                rgba(248, 250, 252, 0.2) 100%);
            margin: 0 0.5rem 1rem;
            border-radius: var(--border-radius);
            backdrop-filter: blur(10px);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            color: var(--text-primary);
            text-decoration: none;
        }

        .logo-icon {
            width: 2rem;
            height: 2rem;
            background: var(--primary-gradient);
            border-radius: var(--border-radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            color: white;
        }

        .logo-text {
            font-size: var(--font-size-lg);
            font-weight: 700;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-section {
            margin-bottom: 1rem;
        }

        .nav-title {
            padding: 0 1rem 0.4rem;
            font-size: var(--font-size-xs);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin: 0.15rem 0.5rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 0.6rem 0.8rem;
            color: var(--text-primary);
            text-decoration: none;
            border-radius: var(--border-radius-sm);
            transition: var(--transition-smooth);
            font-weight: 500;
            font-size: var(--font-size-sm);
            cursor: pointer;
            border: 1px solid transparent;
        }

        .nav-link:hover {
            color: var(--text-primary);
            transform: translateX(-2px);
            border-color: rgba(59, 130, 246, 0.15);
            background: rgba(59, 130, 246, 0.05);
        }

        .nav-link.active {
            background: var(--primary-gradient);
            color: var(--text-light);
            box-shadow: var(--shadow-md);
        }

        .nav-icon {
            margin-left: 0.6rem;
            width: 1rem;
            text-align: center;
            font-size: 0.9rem;
        }

        .nav-badge {
            background: var(--danger-gradient);
            color: white;
            padding: 0.15rem 0.4rem;
            border-radius: 10px;
            font-size: var(--font-size-xs);
            font-weight: 600;
            margin-right: auto;
            min-width: 1.2rem;
            text-align: center;
        }

        /* Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ */
        .main-content {
            flex: 1;
            margin-right: var(--sidebar-width);
            padding: 1rem;
            min-height: 100vh;
            width: calc(100% - var(--sidebar-width));
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .page-title {
            font-size: var(--font-size-2xl);
            font-weight: 800;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 0.6rem;
        }

        .page-actions {
            display: flex;
            gap: 0.8rem;
        }

        .btn {
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: var(--border-radius-sm);
            font-family: inherit;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-smooth);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            font-size: var(--font-size-sm);
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            box-shadow: var(--shadow-sm);
        }

        .btn-primary:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .btn-outline:hover {
            background: rgba(59, 130, 246, 0.05);
            border-color: rgba(59, 130, 246, 0.4);
        }

        /* Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§ØµÙ„ÛŒ */
        .search-main {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-md);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .search-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .search-primary {
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 1rem 3rem 1rem 1rem;
            border: 2px solid var(--glass-border);
            border-radius: var(--border-radius);
            background: var(--glass-bg);
            color: var(--text-primary);
            font-family: inherit;
            font-size: var(--font-size-lg);
            transition: var(--transition-smooth);
        }

        .search-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            background: var(--card-bg);
        }

        .search-btn {
            position: absolute;
            left: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 0.8rem 1.2rem;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition-smooth);
        }

        .search-btn:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        /* ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ */
        .search-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            padding: 1.5rem;
            background: rgba(59, 130, 246, 0.03);
            border-radius: var(--border-radius);
            border: 1px solid rgba(59, 130, 246, 0.1);
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-label {
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--text-primary);
        }

        .filter-select,
        .filter-input {
            padding: 0.6rem 0.8rem;
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius-sm);
            background: var(--glass-bg);
            color: var(--text-primary);
            font-family: inherit;
            font-size: var(--font-size-sm);
            transition: var(--transition-smooth);
        }

        .filter-select:focus,
        .filter-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .search-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .btn-sm {
            padding: 0.4rem 0.8rem;
            font-size: var(--font-size-xs);
        }

        /* Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬Ùˆ */
        .search-results {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-md);
            border: 1px solid rgba(255, 255, 255, 0.3);
            overflow: hidden;
            display: none;
        }

        .search-results.show {
            display: block;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.02), rgba(255, 255, 255, 0.1));
        }

        .results-title {
            font-size: var(--font-size-lg);
            font-weight: 700;
            color: var(--text-primary);
        }

        .results-stats {
            display: flex;
            gap: 1rem;
            font-size: var(--font-size-sm);
            color: var(--text-muted);
        }

        .result-item {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.03);
            transition: var(--transition-smooth);
            cursor: pointer;
        }

        .result-item:hover {
            background: rgba(59, 130, 246, 0.02);
            transform: translateX(-3px);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .result-title {
            font-size: var(--font-size-lg);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .result-icon {
            width: 1.5rem;
            height: 1.5rem;
            background: var(--primary-gradient);
            border-radius: var(--border-radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: var(--font-size-xs);
        }

        .result-meta {
            display: flex;
            gap: 1rem;
            font-size: var(--font-size-sm);
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .result-snippet {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .result-highlight {
            background: rgba(245, 158, 11, 0.2);
            color: var(--text-primary);
            font-weight: 600;
            padding: 0.1rem 0.2rem;
            border-radius: 3px;
        }

        .result-actions {
            display: flex;
            gap: 0.5rem;
        }

        .result-btn {
            padding: 0.3rem 0.6rem;
            border: none;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition-fast);
            font-size: var(--font-size-xs);
            font-weight: 500;
        }

        .result-btn.primary {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }

        .result-btn.secondary {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
        }

        .result-btn:hover {
            transform: scale(1.05);
        }

        /* Ù†ØªØ§ÛŒØ¬ Ø®Ø§Ù„ÛŒ */
        .empty-results {
            display: none;
            padding: 3rem;
            text-align: center;
            color: var(--text-secondary);
        }

        .empty-results.show {
            display: block;
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.3;
            color: var(--text-muted);
        }

        .empty-title {
            font-size: var(--font-size-xl);
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .empty-description {
            font-size: var(--font-size-base);
            margin-bottom: 1.5rem;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        /* ØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒ */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.4rem;
            padding: 1rem;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
        }

        .pagination-btn {
            padding: 0.4rem 0.6rem;
            border: 1px solid var(--glass-border);
            background: var(--glass-bg);
            color: var(--text-primary);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition-fast);
            font-size: var(--font-size-xs);
            font-family: inherit;
            font-weight: 500;
        }

        .pagination-btn:hover:not(:disabled) {
            background: var(--primary-gradient);
            color: white;
            border-color: transparent;
            transform: translateY(-1px);
        }

        .pagination-btn.active {
            background: var(--primary-gradient);
            color: white;
            border-color: transparent;
        }

        .pagination-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* Ù„ÙˆØ¯ÛŒÙ†Ú¯ */
        .loading-container {
            display: none;
            padding: 3rem;
            text-align: center;
            color: var(--text-secondary);
        }

        .loading-container.show {
            display: block;
        }

        .loading-spinner {
            width: 2rem;
            height: 2rem;
            border: 2px solid rgba(59, 130, 246, 0.1);
            border-radius: 50%;
            border-top-color: #3b82f6;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 1rem;
            left: 1rem;
            z-index: 10001;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .toast {
            background: var(--card-bg);
            border-radius: var(--border-radius-sm);
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow-lg);
            border-left: 4px solid;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            min-width: 300px;
            transform: translateX(-100%);
            transition: all 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success { border-left-color: #10b981; }
        .toast.error { border-left-color: #ef4444; }
        .toast.warning { border-left-color: #f59e0b; }
        .toast.info { border-left-color: #3b82f6; }

        .toast-icon {
            font-size: 1.2rem;
        }

        .toast.success .toast-icon { color: #10b981; }
        .toast.error .toast-icon { color: #ef4444; }
        .toast.warning .toast-icon { color: #f59e0b; }
        .toast.info .toast-icon { color: #3b82f6; }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            font-size: var(--font-size-sm);
            margin-bottom: 0.2rem;
        }

        .toast-message {
            font-size: var(--font-size-xs);
            color: var(--text-secondary);
        }

        .toast-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1rem;
            transition: var(--transition-fast);
        }

        .toast-close:hover {
            color: var(--text-primary);
        }

        /* ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±Ø§ÛŒÛŒ */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(100%);
                transition: transform 0.3s ease;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-right: 0;
                width: 100%;
                padding: 1rem;
            }

            .search-filters {
                grid-template-columns: 1fr;
            }

            .search-actions {
                justify-content: center;
                flex-wrap: wrap;
            }

            .results-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .result-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .result-meta {
                flex-direction: column;
                gap: 0.5rem;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 0.8rem;
            }

            .search-main {
                padding: 1.5rem;
            }

            .search-input {
                font-size: var(--font-size-base);
                padding: 0.8rem 2.5rem 0.8rem 0.8rem;
            }

            .search-btn {
                padding: 0.6rem 0.8rem;
            }

            .result-item {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Ø³Ø§ÛŒØ¯Ø¨Ø§Ø± -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/" class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-scale-balanced"></i>
                    </div>
                    <div class="logo-text">Ø³Ø§Ù…Ø§Ù†Ù‡ Ø­Ù‚ÙˆÙ‚ÛŒ</div>
                </a>
            </div>

            <nav>
                <div class="nav-section">
                    <h6 class="nav-title">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</h6>
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <a href="/" class="nav-link">
                                <i class="fas fa-chart-pie nav-icon"></i>
                                <span>Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h6 class="nav-title">Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø³Ù†Ø§Ø¯</h6>
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <a href="/static/documents.html" class="nav-link">
                                <i class="fas fa-file-alt nav-icon"></i>
                                <span>Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø³Ù†Ø§Ø¯</span>
                                <span class="nav-badge" id="totalDocumentsBadge">6</span>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="/static/upload.html" class="nav-link">
                                <i class="fas fa-cloud-upload-alt nav-icon"></i>
                                <span>Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„</span>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="/static/search.html" class="nav-link active">
                                <i class="fas fa-search nav-icon"></i>
                                <span>Ø¬Ø³ØªØ¬Ùˆ</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h6 class="nav-title">Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§</h6>
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <a href="/static/scraping.html" class="nav-link">
                                <i class="fas fa-globe nav-icon"></i>
                                <span>Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ø­ØªÙˆØ§</span>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="/static/analytics.html" class="nav-link">
                                <i class="fas fa-chart-line nav-icon"></i>
                                <span>Ø¢Ù…Ø§Ø± Ùˆ ØªØ­Ù„ÛŒÙ„</span>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="/static/reports.html" class="nav-link">
                                <i class="fas fa-file-export nav-icon"></i>
                                <span>Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h6 class="nav-title">ØªÙ†Ø¸ÛŒÙ…Ø§Øª</h6>
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <a href="/static/settings.html" class="nav-link">
                                <i class="fas fa-cog nav-icon"></i>
                                <span>ØªÙ†Ø¸ÛŒÙ…Ø§Øª</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-sign-out-alt nav-icon"></i>
                                <span>Ø®Ø±ÙˆØ¬</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ -->
        <main class="main-content">
            <!-- Ù‡Ø¯Ø± ØµÙØ­Ù‡ -->
            <header class="page-header">
                <h1 class="page-title">
                    <i class="fas fa-search"></i>
                    Ø¬Ø³ØªØ¬ÙˆÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø§Ø³Ù†Ø§Ø¯
                </h1>
                <div class="page-actions">
                    <button type="button" class="btn btn-outline" onclick="clearSearch()">
                        <i class="fas fa-undo"></i>
                        Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†
                    </button>
                    <a href="/static/documents.html" class="btn btn-primary">
                        <i class="fas fa-list"></i>
                        Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù‡Ù…Ù‡ Ø§Ø³Ù†Ø§Ø¯
                    </a>
                </div>
            </header>

            <!-- Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§ØµÙ„ÛŒ -->
            <section class="search-main">
                <form class="search-form" onsubmit="performSearch(event)">
                    <div class="search-primary">
                        <input type="text" 
                               class="search-input" 
                               id="searchQuery"
                               name="q"
                               placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø§Ø³Ù†Ø§Ø¯ØŒ Ù‚ÙˆØ§Ù†ÛŒÙ†ØŒ Ø¢Ø±Ø§..."
                               autocomplete="off">
                        <button type="submit" class="search-btn">
                            <i class="fas fa-search"></i>
                            Ø¬Ø³ØªØ¬Ùˆ
                        </button>
                    </div>

                    <div class="search-filters">
                        <div class="filter-group">
                            <label class="filter-label" for="categoryFilter">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</label>
                            <select class="filter-select" id="categoryFilter" name="category">
                                <option value="">Ù‡Ù…Ù‡ Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§</option>
                                <option value="Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§">Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§</option>
                                <option value="Ø¯Ø§Ø¯Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§">Ø¯Ø§Ø¯Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§</option>
                                <option value="Ø§Ø­Ú©Ø§Ù… Ù‚Ø¶Ø§ÛŒÛŒ">Ø§Ø­Ú©Ø§Ù… Ù‚Ø¶Ø§ÛŒÛŒ</option>
                                <option value="Ø¢Ø±Ø§ÛŒ Ø¯ÛŒÙˆØ§Ù†">Ø¢Ø±Ø§ÛŒ Ø¯ÛŒÙˆØ§Ù†</option>
                                <option value="Ø³Ø§ÛŒØ±">Ø³Ø§ÛŒØ±</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label class="filter-label" for="statusFilter">ÙˆØ¶Ø¹ÛŒØª</label>
                            <select class="filter-select" id="statusFilter" name="status">
                                <option value="">Ù‡Ù…Ù‡ ÙˆØ¶Ø¹ÛŒØªâ€ŒÙ‡Ø§</option>
                                <option value="processed">Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´Ø¯Ù‡</option>
                                <option value="processing">Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´</option>
                                <option value="pending">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±</option>
                                <option value="error">Ø®Ø·Ø§</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label class="filter-label" for="dateFromFilter">Ø§Ø² ØªØ§Ø±ÛŒØ®</label>
                            <input type="date" class="filter-input" id="dateFromFilter" name="date_from">
                        </div>

                        <div class="filter-group">
                            <label class="filter-label" for="dateToFilter">ØªØ§ ØªØ§Ø±ÛŒØ®</label>
                            <input type="date" class="filter-input" id="dateToFilter" name="date_to">
                        </div>

                        <div class="filter-group">
                            <label class="filter-label" for="qualityFilter">Ø­Ø¯Ø§Ù‚Ù„ Ú©ÛŒÙÛŒØª</label>
                            <select class="filter-select" id="qualityFilter" name="min_quality">
                                <option value="">Ù‡Ù…Ù‡ Ú©ÛŒÙÛŒØªâ€ŒÙ‡Ø§</option>
                                <option value="8.5">Ø¹Ø§Ù„ÛŒ (8.5+)</option>
                                <option value="6.5">Ø®ÙˆØ¨ (6.5+)</option>
                                <option value="4.5">Ù…ØªÙˆØ³Ø· (4.5+)</option>
                                <option value="0">Ø¶Ø¹ÛŒÙ (Ú©Ù…ØªØ± Ø§Ø² 4.5)</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label class="filter-label" for="sortFilter">Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ</label>
                            <select class="filter-select" id="sortFilter" name="sort">
                                <option value="relevance">Ù…Ø±ØªØ¨Ø·â€ŒØªØ±ÛŒÙ†</option>
                                <option value="date_desc">Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ†</option>
                                <option value="date_asc">Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ±ÛŒÙ†</option>
                                <option value="quality_desc">Ø¨Ù‡ØªØ±ÛŒÙ† Ú©ÛŒÙÛŒØª</option>
                                <option value="size_desc">Ø¨Ø²Ø±Ú¯ØªØ±ÛŒÙ† ÙØ§ÛŒÙ„</option>
                            </select>
                        </div>
                    </div>

                    <div class="search-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-search"></i>
                            Ø¬Ø³ØªØ¬Ùˆ
                        </button>
                        <button type="button" class="btn btn-outline btn-sm" onclick="resetFilters()">
                            <i class="fas fa-undo"></i>
                            Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙÛŒÙ„ØªØ±Ù‡Ø§
                        </button>
                        <button type="button" class="btn btn-outline btn-sm" onclick="exportResults()">
                            <i class="fas fa-download"></i>
                            Ø®Ø±ÙˆØ¬ÛŒ Ù†ØªØ§ÛŒØ¬
                        </button>
                    </div>
                </form>
            </section>

            <!-- Ù„ÙˆØ¯ÛŒÙ†Ú¯ -->
            <section class="loading-container" id="loadingContainer">
                <div class="loading-spinner"></div>
                <p>Ø¯Ø± Ø­Ø§Ù„ Ø¬Ø³ØªØ¬Ùˆ...</p>
            </section>

            <!-- Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬Ùˆ -->
            <section class="search-results" id="searchResults">
                <div class="results-header">
                    <h3 class="results-title">Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬Ùˆ</h3>
                    <div class="results-stats">
                        <span>ØªØ¹Ø¯Ø§Ø¯ Ù†ØªØ§ÛŒØ¬: <strong id="resultsCount">0</strong></span>
                        <span>Ø²Ù…Ø§Ù† Ø¬Ø³ØªØ¬Ùˆ: <strong id="searchTime">0.00</strong> Ø«Ø§Ù†ÛŒÙ‡</span>
                    </div>
                </div>

                <div id="resultsContainer">
                    <!-- Ù†ØªØ§ÛŒØ¬ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                </div>

                <div class="pagination" id="pagination">
                    <!-- ØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                </div>
            </section>

            <!-- Ù†ØªØ§ÛŒØ¬ Ø®Ø§Ù„ÛŒ -->
            <section class="empty-results" id="emptyResults">
                <i class="fas fa-search empty-icon"></i>
                <div class="empty-title">Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</div>
                <div class="empty-description">
                    Ù…ØªØ£Ø³ÙØ§Ù†Ù‡ Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø´Ù…Ø§ Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ Ø¯ÛŒÚ¯Ø±ÛŒ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯ ÛŒØ§ ÙÛŒÙ„ØªØ±Ù‡Ø§ Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯.
                </div>
                <button type="button" class="btn btn-primary" onclick="clearSearch()">
                    <i class="fas fa-search"></i>
                    Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¬Ø¯ÛŒØ¯
                </button>
            </section>
        </main>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // Global variables
        let currentResults = [];
        let currentPage = 1;
        let itemsPerPage = 10;
        let totalResults = 0;
        let searchStartTime = 0;
        let isOnline = false;

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ” Search page loading...');
            initializeSearchPage();
        });

        async function initializeSearchPage() {
            try {
                // Test backend connection
                isOnline = await testConnection();
                
                // Setup event listeners
                setupEventListeners();
                
                // Check for URL parameters
                checkUrlParameters();
                
                showToast('ØµÙØ­Ù‡ Ø¬Ø³ØªØ¬Ùˆ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª', 'success', 'Ø¢Ù…Ø§Ø¯Ù‡');
                
            } catch (error) {
                console.error('Failed to initialize search page:', error);
                
                // Fallback mode
                isOnline = false;
                setupEventListeners();
                
                showToast('Ø­Ø§Ù„Øª Ø¢ÙÙ„Ø§ÛŒÙ† ÙØ¹Ø§Ù„ Ø§Ø³Øª', 'warning', 'Ø§ØªØµØ§Ù„ Ù†Ø§Ù…ÙˆÙÙ‚');
            }
        }

        async function testConnection() {
            try {
                await window.legalAPI.healthCheck();
                return true;
            } catch (error) {
                return false;
            }
        }

        function setupEventListeners() {
            // Form submission
            document.querySelector('.search-form').addEventListener('submit', performSearch);
            
            // Real-time search with debounce
            const searchInput = document.getElementById('searchQuery');
            let searchTimeout;
            searchInput.addEventListener('input', function(e) {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    if (e.target.value.trim().length > 2) {
                        performQuickSearch(e.target.value.trim());
                    }
                }, 500);
            });

            // Filter changes
            ['categoryFilter', 'statusFilter', 'qualityFilter', 'sortFilter'].forEach(id => {
                document.getElementById(id).addEventListener('change', debounce(performCurrentSearch, 300));
            });

            ['dateFromFilter', 'dateToFilter'].forEach(id => {
                document.getElementById(id).addEventListener('change', debounce(performCurrentSearch, 500));
            });
        }

        function checkUrlParameters() {
            const urlParams = new URLSearchParams(window.location.search);
            const query = urlParams.get('q');
            
            if (query) {
                document.getElementById('searchQuery').value = query;
                performSearch();
            }
        }

        async function performSearch(event) {
            if (event) {
                event.preventDefault();
            }

            const form = document.querySelector('.search-form');
            const formData = new FormData(form);
            
            const searchParams = {
                q: formData.get('q').trim(),
                category: formData.get('category'),
                status: formData.get('status'),
                date_from: formData.get('date_from'),
                date_to: formData.get('date_to'),
                min_quality: formData.get('min_quality'),
                sort: formData.get('sort') || 'relevance',
                page: currentPage,
                limit: itemsPerPage
            };

            // Validate search query
            if (!searchParams.q || searchParams.q.length < 2) {
                showToast('Ù„Ø·ÙØ§Ù‹ Ø­Ø¯Ø§Ù‚Ù„ 2 Ú©Ø§Ø±Ø§Ú©ØªØ± Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'warning', 'Ù‡Ø´Ø¯Ø§Ø±');
                return;
            }

            showLoading(true);
            searchStartTime = performance.now();

            try {
                let results;
                
                if (isOnline) {
                    // Real API search
                    results = await window.legalAPI.searchDocuments(searchParams);
                } else {
                    // Mock search results
                    results = await generateMockSearchResults(searchParams);
                }

                const searchTime = ((performance.now() - searchStartTime) / 1000).toFixed(2);
                displaySearchResults(results, searchTime);
                
                console.log('Search completed:', results);
                
            } catch (error) {
                console.error('Search failed:', error);
                showToast('Ø®Ø·Ø§ Ø¯Ø± Ø¬Ø³ØªØ¬Ùˆ. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.', 'error', 'Ø®Ø·Ø§');
                showEmptyResults();
            } finally {
                showLoading(false);
            }
        }

        async function performQuickSearch(query) {
            if (!query || query.length < 3) return;

            try {
                const searchParams = { q: query, limit: 5 };
                
                let results;
                if (isOnline) {
                    results = await window.legalAPI.searchDocuments(searchParams);
                } else {
                    results = await generateMockSearchResults(searchParams);
                }

                // Could implement quick search dropdown here
                console.log('Quick search results:', results);
                
            } catch (error) {
                console.error('Quick search failed:', error);
            }
        }

        async function performCurrentSearch() {
            const form = document.querySelector('.search-form');
            const formData = new FormData(form);
            
            if (formData.get('q').trim()) {
                await performSearch();
            }
        }

        async function generateMockSearchResults(searchParams) {
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 800));

            const mockDocuments = [
                {
                    id: 1,
                    filename: "contract_001.pdf",
                    original_filename: "Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ù…Ù„Ø§Ú©.pdf",
                    file_size: 1024000,
                    category: "Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§",
                    quality_score: 8.5,
                    status: "processed",
                    created_at: "2024-01-15T10:30:00Z",
                    ocr_text: "Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø®Ø±ÛŒØ¯ Ùˆ ÙØ±ÙˆØ´ Ù…Ù„Ú© ÙˆØ§Ù‚Ø¹ Ø¯Ø± ØªÙ‡Ø±Ø§Ù† Ù…Ù†Ø·Ù‚Ù‡ 3...",
                    summary: "Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ù…Ù„Ø§Ú© Ù…Ø³Ú©ÙˆÙ†ÛŒ Ø¯Ø± Ù…Ù†Ø·Ù‚Ù‡ 3 ØªÙ‡Ø±Ø§Ù†",
                    relevance_score: 0.95
                },
                {
                    id: 2,
                    filename: "lawsuit_002.pdf",
                    original_filename: "Ø¯Ø§Ø¯Ø®ÙˆØ§Ø³Øª Ø·Ù„Ø§Ù‚.pdf",
                    file_size: 512000,
                    category: "Ø¯Ø§Ø¯Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§",
                    quality_score: 7.8,
                    status: "processed",
                    created_at: "2024-01-14T14:20:00Z",
                    ocr_text: "Ø¯Ø§Ø¯Ø®ÙˆØ§Ø³Øª Ø·Ù„Ø§Ù‚ Ø¨Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø²ÙˆØ¬Ù‡...",
                    summary: "Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø·Ù„Ø§Ù‚ ØªÙˆØ§ÙÙ‚ÛŒ Ø¨Ø§ ØªÙ‚Ø³ÛŒÙ… Ø§Ù…ÙˆØ§Ù„",
                    relevance_score: 0.87
                },
                {
                    id: 3,
                    filename: "judgment_003.pdf",
                    original_filename: "Ø­Ú©Ù… Ø¯Ø§Ø¯Ú¯Ø§Ù‡ Ø¹Ù…ÙˆÙ…ÛŒ.pdf",
                    file_size: 768000,
                    category: "Ø§Ø­Ú©Ø§Ù… Ù‚Ø¶Ø§ÛŒÛŒ",
                    quality_score: 9.2,
                    status: "processed",
                    created_at: "2024-01-13T09:15:00Z",
                    ocr_text: "Ø­Ú©Ù… Ø¯Ø§Ø¯Ú¯Ø§Ù‡ Ø¹Ù…ÙˆÙ…ÛŒ Ø­Ù‚ÙˆÙ‚ÛŒ ØªÙ‡Ø±Ø§Ù†...",
                    summary: "Ø­Ú©Ù… Ù¾Ø±ÙˆÙ†Ø¯Ù‡ Ù…Ù„Ú©ÛŒ Ø¯Ø± Ø¯Ø§Ø¯Ú¯Ø§Ù‡ Ø¹Ù…ÙˆÙ…ÛŒ ØªÙ‡Ø±Ø§Ù†",
                    relevance_score: 0.82
                }
            ];

            // Filter results based on search parameters
            let filteredResults = mockDocuments;

            if (searchParams.category) {
                filteredResults = filteredResults.filter(doc => doc.category === searchParams.category);
            }

            if (searchParams.status) {
                filteredResults = filteredResults.filter(doc => doc.status === searchParams.status);
            }

            if (searchParams.min_quality) {
                const minQuality = parseFloat(searchParams.min_quality);
                filteredResults = filteredResults.filter(doc => doc.quality_score >= minQuality);
            }

            // Apply sorting
            if (searchParams.sort) {
                switch (searchParams.sort) {
                    case 'date_desc':
                        filteredResults.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
                        break;
                    case 'date_asc':
                        filteredResults.sort((a, b) => new Date(a.created_at) - new Date(b.created_at));
                        break;
                    case 'quality_desc':
                        filteredResults.sort((a, b) => b.quality_score - a.quality_score);
                        break;
                    case 'relevance':
                    default:
                        filteredResults.sort((a, b) => b.relevance_score - a.relevance_score);
                        break;
                }
            }

            return {
                documents: filteredResults,
                pagination: {
                    page: searchParams.page || 1,
                    limit: searchParams.limit || 10,
                    total: filteredResults.length,
                    pages: Math.ceil(filteredResults.length / (searchParams.limit || 10))
                }
            };
        }

        function displaySearchResults(results, searchTime) {
            currentResults = results.documents || [];
            totalResults = results.pagination?.total || 0;

            const resultsContainer = document.getElementById('resultsContainer');
            const searchResults = document.getElementById('searchResults');
            const emptyResults = document.getElementById('emptyResults');

            // Update stats
            document.getElementById('resultsCount').textContent = totalResults;
            document.getElementById('searchTime').textContent = searchTime;

            if (currentResults.length === 0) {
                searchResults.classList.remove('show');
                emptyResults.classList.add('show');
                return;
            }

            // Display results
            emptyResults.classList.remove('show');
            searchResults.classList.add('show');

            const searchQuery = document.getElementById('searchQuery').value.toLowerCase();
            
            resultsContainer.innerHTML = currentResults.map(doc => {
                const snippet = generateSnippet(doc, searchQuery);
                const relevanceScore = ((doc.relevance_score || 0.8) * 100).toFixed(0);

                return `
                    <div class="result-item" onclick="viewDocument(${doc.id})">
                        <div class="result-header">
                            <div>
                                <div class="result-title">
                                    <div class="result-icon">
                                        <i class="fas fa-file-pdf"></i>
                                    </div>
                                    ${highlightText(doc.original_filename || doc.filename, searchQuery)}
                                </div>
                                <div class="result-meta">
                                    <span><i class="fas fa-tag"></i> ${doc.category}</span>
                                    <span><i class="fas fa-calendar"></i> ${formatDate(doc.created_at)}</span>
                                    <span><i class="fas fa-star"></i> Ú©ÛŒÙÛŒØª: ${doc.quality_score?.toFixed(1) || '0.0'}</span>
                                    <span><i class="fas fa-percentage"></i> Ø§Ø±ØªØ¨Ø§Ø·: ${relevanceScore}%</span>
                                </div>
                            </div>
                            <div class="result-actions">
                                <button type="button" class="result-btn primary" onclick="event.stopPropagation(); viewDocument(${doc.id})" title="Ù…Ø´Ø§Ù‡Ø¯Ù‡">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button type="button" class="result-btn secondary" onclick="event.stopPropagation(); downloadDocument(${doc.id})" title="Ø¯Ø§Ù†Ù„ÙˆØ¯">
                                    <i class="fas fa-download"></i>
                                </button>
                            </div>
                        </div>
                        <div class="result-snippet">
                            ${snippet}
                        </div>
                    </div>
                `;
            }).join('');

            // Setup pagination
            setupPagination(results.pagination);
        }

        function generateSnippet(doc, searchQuery) {
            const text = doc.summary || doc.ocr_text || 'Ù…Ø­ØªÙˆØ§ÛŒ Ù…ØªÙ†ÛŒ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª.';
            const maxLength = 200;
            
            if (!searchQuery || text.length <= maxLength) {
                return highlightText(text.substring(0, maxLength) + (text.length > maxLength ? '...' : ''), searchQuery);
            }

            // Try to find the search term in the text
            const lowerText = text.toLowerCase();
            const queryIndex = lowerText.indexOf(searchQuery);
            
            if (queryIndex === -1) {
                return highlightText(text.substring(0, maxLength) + '...', searchQuery);
            }

            // Extract snippet around the search term
            const start = Math.max(0, queryIndex - 80);
            const end = Math.min(text.length, queryIndex + searchQuery.length + 80);
            
            let snippet = text.substring(start, end);
            if (start > 0) snippet = '...' + snippet;
            if (end < text.length) snippet = snippet + '...';
            
            return highlightText(snippet, searchQuery);
        }

        function highlightText(text, query) {
            if (!query || query.length < 2) return text;
            
            const regex = new RegExp(`(${escapeRegExp(query)})`, 'gi');
            return text.replace(regex, '<span class="result-highlight">$1</span>');
        }

        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        function setupPagination(pagination) {
            const paginationContainer = document.getElementById('pagination');
            const totalPages = pagination.pages;

            if (totalPages <= 1) {
                paginationContainer.style.display = 'none';
                return;
            }

            paginationContainer.style.display = 'flex';

            let paginationHTML = '';

            // Previous button
            paginationHTML += `
                <button class="pagination-btn" ${currentPage <= 1 ? 'disabled' : ''} 
                        onclick="changePage(${currentPage - 1})">
                    <i class="fas fa-chevron-right"></i>
                </button>
            `;

            // Page numbers
            const startPage = Math.max(1, currentPage - 2);
            const endPage = Math.min(totalPages, currentPage + 2);

            for (let i = startPage; i <= endPage; i++) {
                paginationHTML += `
                    <button class="pagination-btn ${i === currentPage ? 'active' : ''}" 
                            onclick="changePage(${i})">
                        ${i}
                    </button>
                `;
            }

            // Next button
            paginationHTML += `
                <button class="pagination-btn" ${currentPage >= totalPages ? 'disabled' : ''} 
                        onclick="changePage(${currentPage + 1})">
                    <i class="fas fa-chevron-left"></i>
                </button>
            `;

            paginationContainer.innerHTML = paginationHTML;
        }

        async function changePage(page) {
            currentPage = page;
            await performSearch();
            
            // Scroll to top of results
            document.getElementById('searchResults').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }

        function showEmptyResults() {
            document.getElementById('searchResults').classList.remove('show');
            document.getElementById('emptyResults').classList.add('show');
        }

        function showLoading(show) {
            const loading = document.getElementById('loadingContainer');
            const results = document.getElementById('searchResults');
            const empty = document.getElementById('emptyResults');
            
            if (show) {
                loading.classList.add('show');
                results.classList.remove('show');
                empty.classList.remove('show');
            } else {
                loading.classList.remove('show');
            }
        }

        function resetFilters() {
            // Reset all filter fields except search query
            document.getElementById('categoryFilter').value = '';
            document.getElementById('statusFilter').value = '';
            document.getElementById('dateFromFilter').value = '';
            document.getElementById('dateToFilter').value = '';
            document.getElementById('qualityFilter').value = '';
            document.getElementById('sortFilter').value = 'relevance';
            
            showToast('ÙÛŒÙ„ØªØ±Ù‡Ø§ Ù¾Ø§Ú© Ø´Ø¯Ù†Ø¯', 'info', 'Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ');
            
            // Perform search again if there's a query
            const query = document.getElementById('searchQuery').value.trim();
            if (query) {
                performCurrentSearch();
            }
        }

        function clearSearch() {
            document.querySelector('.search-form').reset();
            document.getElementById('searchResults').classList.remove('show');
            document.getElementById('emptyResults').classList.remove('show');
            document.getElementById('searchQuery').focus();
            
            showToast('Ø¬Ø³ØªØ¬Ùˆ Ù¾Ø§Ú© Ø´Ø¯', 'info', 'Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†');
        }

        function exportResults() {
            if (currentResults.length === 0) {
                showToast('Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø®Ø±ÙˆØ¬ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯', 'warning', 'Ù‡Ø´Ø¯Ø§Ø±');
                return;
            }

            showToast('ÙØ§ÛŒÙ„ Ù†ØªØ§ÛŒØ¬ Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ...', 'info', 'Ø®Ø±ÙˆØ¬ÛŒ');
            
            setTimeout(() => {
                showToast('Ø®Ø±ÙˆØ¬ÛŒ Ù†ØªØ§ÛŒØ¬ Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ø¯', 'success', 'Ø®Ø±ÙˆØ¬ÛŒ Ù…ÙˆÙÙ‚');
            }, 2000);
        }

        function viewDocument(documentId) {
            showToast(`Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³Ù†Ø¯ Ø´Ù…Ø§Ø±Ù‡ ${documentId}`, 'info', 'Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³Ù†Ø¯');
            // Could redirect to document detail page
        }

        function downloadDocument(documentId) {
            showToast(`Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø³Ù†Ø¯ Ø´Ù…Ø§Ø±Ù‡ ${documentId} Ø´Ø±ÙˆØ¹ Ø´Ø¯`, 'info', 'Ø¯Ø§Ù†Ù„ÙˆØ¯');
        }

        // Utility functions
        function formatDate(dateString) {
            if (!dateString) return 'Ù†Ø§Ù…Ø´Ø®Øµ';
            const date = new Date(dateString);
            return date.toLocaleDateString('fa-IR', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function showToast(message, type = 'info', title = 'Ø§Ø¹Ù„Ø§Ù†') {
            const toastContainer = document.getElementById('toastContainer');
            if (!toastContainer) return;
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: 'check-circle',
                error: 'exclamation-triangle',
                warning: 'exclamation-circle',
                info: 'info-circle'
            };

            toast.innerHTML = `
                <div class="toast-icon">
                    <i class="fas fa-${icons[type]}"></i>
                </div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button type="button" class="toast-close" onclick="this.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
            `;

            toastContainer.appendChild(toast);

            // Show toast
            setTimeout(() => toast.classList.add('show'), 100);

            // Auto remove after 5 seconds
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        if (toast.parentElement) {
                            toast.remove();
                        }
                    }, 300);
                }
            }, 5000);
        }

        console.log('ğŸ” Search Page Ready!');
    </script>
</body>
</html>